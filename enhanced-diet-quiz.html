<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Diet Quiz - FuelFire</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="phone-container">
        <div class="screen">
            <div class="status-bar">
                <span id="time">9:41</span>
                <span>100%</span>
            </div>
            
            <div class="header">
                <div class="hamburger" onclick="goBack()">‚Üê</div>
                <div class="header-title">Enhanced Diet Quiz</div>
            </div>
            
            <div class="content">
                <div id="quiz-content">
                    <!-- Quiz content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Diet Quiz Variables
        let currentStep = 1;
        const totalSteps = 9;
        let quizData = {};
        let measurementSystem = 'imperial'; // 'imperial' or 'metric'

        // Helper functions for check all/none buttons
        function selectAllMeats() {
            document.querySelectorAll('.meat-check').forEach(cb => cb.checked = true);
        }

        function selectNoMeats() {
            document.querySelectorAll('.meat-check').forEach(cb => cb.checked = false);
        }

        function selectAllVeggies() {
            document.querySelectorAll('.veggie-check').forEach(cb => cb.checked = true);
        }

        function selectNoVeggies() {
            document.querySelectorAll('.veggie-check').forEach(cb => cb.checked = false);
        }

        function handleNoneAllergy(checkbox) {
            if (checkbox.checked) {
                document.querySelectorAll('.allergy-check').forEach(cb => {
                    if (cb !== checkbox) cb.checked = false;
                });
            }
        }

        function toggleMeasurementSystem(system) {
            measurementSystem = system;
            document.getElementById('imperial-btn').style.background = system === 'imperial' ? 'var(--primary)' : 'var(--lighter-bg)';
            document.getElementById('imperial-btn').style.color = system === 'imperial' ? 'white' : 'var(--dark)';
            document.getElementById('metric-btn').style.background = system === 'metric' ? 'var(--primary)' : 'var(--lighter-bg)';
            document.getElementById('metric-btn').style.color = system === 'metric' ? 'white' : 'var(--dark)';
            
            // Toggle height inputs
            document.getElementById('height-imperial').style.display = system === 'imperial' ? 'block' : 'none';
            document.getElementById('height-metric').style.display = system === 'metric' ? 'block' : 'none';
            
            // Update weight label
            document.getElementById('weight-label').textContent = `Weight (${system === 'imperial' ? 'lbs' : 'kg'})`;
            document.getElementById('quiz-weight').placeholder = system === 'imperial' ? '150' : '68';
        }

        function goBack() {
            window.location.href = 'index.html';
        }

        function updateTime() {
            const now = new Date();
            const time = now.toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: true 
            });
            document.getElementById('time').textContent = time;
        }

        function showStep(step) {
            const content = document.getElementById('quiz-content');
            let html = '';

            if (step === 1) {
                html = `
                    <div style="background: var(--gradient-1); color: white; padding: 30px; border-radius: 25px; margin-bottom: 25px; text-align: center;">
                        <h2 style="font-size: 28px; margin-bottom: 10px;">üéØ Your Goals</h2>
                        <p style="opacity: 0.9;">Step 1 of 9 - Let's start with your objectives</p>
                    </div>
                    
                    <div style="background: var(--card-bg); border-radius: 20px; padding: 25px; margin-bottom: 20px;">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">What's your primary goal?</label>
                            <select id="diet-goal" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; font-size: 16px;">
                                <option value="">Select your goal...</option>
                                <option value="weight-loss">üî• Weight Loss</option>
                                <option value="muscle-gain">üí™ Muscle Gain</option>
                                <option value="maintenance">‚öñÔ∏è Maintenance</option>
                                <option value="recomp">üîÑ Body Recomposition</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Daily calorie target (optional)</label>
                            <input type="number" id="calorie-target" placeholder="Leave blank for automatic calculation" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                        </div>
                        
                        <button onclick="nextStep()" style="background: var(--gradient-1); color: white; border: none; padding: 15px 30px; border-radius: 25px; width: 100%; font-weight: bold; cursor: pointer; font-size: 18px;">
                            Continue ‚Üí
                        </button>
                    </div>
                `;
            } else if (step === 2) {
                html = `
                    <div style="background: var(--gradient-1); color: white; padding: 30px; border-radius: 25px; margin-bottom: 25px; text-align: center;">
                        <h2 style="font-size: 28px; margin-bottom: 10px;">üë§ Personal Information</h2>
                        <p style="opacity: 0.9;">Step 2 of 9 - Help us understand your needs</p>
                    </div>
                    
                    <div style="background: var(--card-bg); border-radius: 20px; padding: 25px; margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                            <div>
                                <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Age</label>
                                <input type="number" id="quiz-age" placeholder="25" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                            </div>
                            <div>
                                <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Gender</label>
                                <select id="quiz-gender" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                                    <option value="">Select...</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Measurement System</label>
                            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                                <button type="button" id="imperial-btn" onclick="toggleMeasurementSystem('imperial')" style="background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 10px; cursor: pointer; flex: 1; font-weight: bold;">
                                    üá∫üá∏ Imperial (lb/ft)
                                </button>
                                <button type="button" id="metric-btn" onclick="toggleMeasurementSystem('metric')" style="background: var(--lighter-bg); color: var(--dark); border: 1px solid #ddd; padding: 10px 20px; border-radius: 10px; cursor: pointer; flex: 1; font-weight: bold;">
                                    üåç Metric (kg/cm)
                                </button>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                            <div>
                                <label id="weight-label" style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Weight (lbs)</label>
                                <input type="number" id="quiz-weight" placeholder="150" style="width: 100%; padding: 15px; border: 1px solid #ddd; border-radius: 10px; font-size: 16px;">
                            </div>
                            <div>
                                <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Height</label>
                                <div id="height-imperial" style="display: block;">
                                    <div style="display: flex; gap: 8px; align-items: center;">
                                        <input type="number" id="quiz-feet" placeholder="5" min="3" max="8" style="width: 45%; padding: 15px; border: 1px solid #ddd; border-radius: 10px; font-size: 16px; text-align: center;">
                                        <span style="font-weight: bold; color: var(--dark);">ft</span>
                                        <input type="number" id="quiz-inches" placeholder="8" min="0" max="11" style="width: 45%; padding: 15px; border: 1px solid #ddd; border-radius: 10px; font-size: 16px; text-align: center;">
                                        <span style="font-weight: bold; color: var(--dark);">in</span>
                                    </div>
                                </div>
                                <div id="height-metric" style="display: none;">
                                    <input type="number" id="quiz-height-cm" placeholder="173" style="width: 100%; padding: 15px; border: 1px solid #ddd; border-radius: 10px; font-size: 16px;">
                                    <label style="font-size: 12px; color: #666; margin-top: 4px; display: block;">centimeters</label>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Activity Level</label>
                            <select id="quiz-activity" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                                <option value="">Select your activity level...</option>
                                <option value="sedentary">Sedentary (little/no exercise)</option>
                                <option value="light">Light (exercise 1-3 days/week)</option>
                                <option value="moderate">Moderate (exercise 3-5 days/week)</option>
                                <option value="very-active">Very Active (exercise 6-7 days/week)</option>
                                <option value="extra-active">Extra Active (physical job + exercise)</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Body Type</label>
                            <select id="quiz-bodytype" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                                <option value="">Select your body type...</option>
                                <option value="ectomorph">Ectomorph (Naturally thin, fast metabolism)</option>
                                <option value="mesomorph">Mesomorph (Athletic build, gains muscle easily)</option>
                                <option value="endomorph">Endomorph (Stocky build, slower metabolism)</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button onclick="prevStep()" style="background: #e74c3c; color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 1; font-weight: bold; cursor: pointer;">
                                ‚Üê Back
                            </button>
                            <button onclick="nextStep()" style="background: var(--gradient-1); color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 2; font-weight: bold; cursor: pointer;">
                                Continue ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            } else if (step === 3) {
                html = `
                    <div style="background: var(--gradient-1); color: white; padding: 30px; border-radius: 25px; margin-bottom: 25px; text-align: center;">
                        <h2 style="font-size: 28px; margin-bottom: 10px;">ü•ó Dietary Restrictions</h2>
                        <p style="opacity: 0.9;">Step 3 of 9 - What should we avoid?</p>
                    </div>
                    
                    <div style="background: var(--card-bg); border-radius: 20px; padding: 25px; margin-bottom: 20px;">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 12px; font-weight: bold;">Food Allergies (check all that apply)</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; max-height: 250px; overflow-y: auto; border: 1px solid #ddd; padding: 15px; border-radius: 10px;">
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="None" style="margin-right: 8px;" onchange="handleNoneAllergy(this)">
                                    <span>None</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="Peanuts" style="margin-right: 8px;">
                                    <span>Peanuts</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="Tree Nuts" style="margin-right: 8px;">
                                    <span>Tree Nuts</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="Dairy" style="margin-right: 8px;">
                                    <span>Dairy</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="Gluten" style="margin-right: 8px;">
                                    <span>Gluten</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="Eggs" style="margin-right: 8px;">
                                    <span>Eggs</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="Shellfish" style="margin-right: 8px;">
                                    <span>Shellfish</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="Fish" style="margin-right: 8px;">
                                    <span>Fish</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="Soy" style="margin-right: 8px;">
                                    <span>Soy</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="Sesame" style="margin-right: 8px;">
                                    <span>Sesame</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="Sulfites" style="margin-right: 8px;">
                                    <span>Sulfites</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="allergy-check" value="Lactose" style="margin-right: 8px;">
                                    <span>Lactose</span>
                                </label>
                            </div>
                            
                            <div style="margin-top: 15px;">
                                <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Other Allergies (please specify)</label>
                                <input type="text" id="other-allergies" placeholder="Type any other allergies or food intolerances..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 12px; font-weight: bold;">Dietary Lifestyle</label>
                            <select id="quiz-dietary-lifestyle" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                                <option value="omnivore">Omnivore (eat everything)</option>
                                <option value="vegetarian">Vegetarian (no meat)</option>
                                <option value="vegan">Vegan (no animal products)</option>
                                <option value="pescatarian">Pescatarian (fish only)</option>
                                <option value="keto">Keto (very low carb)</option>
                                <option value="paleo">Paleo (whole foods only)</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button onclick="prevStep()" style="background: #e74c3c; color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 1; font-weight: bold; cursor: pointer;">
                                ‚Üê Back
                            </button>
                            <button onclick="nextStep()" style="background: var(--gradient-1); color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 2; font-weight: bold; cursor: pointer;">
                                Continue ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            } else if (step === 4) {
                html = `
                    <div style="background: var(--gradient-1); color: white; padding: 30px; border-radius: 25px; margin-bottom: 25px; text-align: center;">
                        <h2 style="font-size: 28px; margin-bottom: 10px;">ü•© Meat Preferences</h2>
                        <p style="opacity: 0.9;">Step 4 of 9 - What meats do you enjoy?</p>
                    </div>
                    
                    <div style="background: var(--card-bg); border-radius: 20px; padding: 25px; margin-bottom: 20px;">
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                <label style="color: var(--dark); font-weight: bold;">Select all meats you enjoy eating</label>
                                <div style="display: flex; gap: 8px;">
                                    <button type="button" onclick="selectAllMeats()" style="background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">
                                        Check All
                                    </button>
                                    <button type="button" onclick="selectNoMeats()" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">
                                        Check None
                                    </button>
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; max-height: 280px; overflow-y: auto; border: 1px solid #ddd; padding: 15px; border-radius: 10px;">
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="üêì Chicken Breast" style="margin-right: 8px;">
                                    <span>üêì Chicken Breast</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="üêì Chicken Thighs" style="margin-right: 8px;">
                                    <span>üêì Chicken Thighs</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="ü•© Ground Beef" style="margin-right: 8px;">
                                    <span>ü•© Ground Beef</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="ü•© Steak" style="margin-right: 8px;">
                                    <span>ü•© Steak</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="ü¶É Turkey" style="margin-right: 8px;">
                                    <span>ü¶É Turkey</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="üêñ Pork" style="margin-right: 8px;">
                                    <span>üêñ Pork</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="ü•ì Bacon" style="margin-right: 8px;">
                                    <span>ü•ì Bacon</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="üå≠ Sausages" style="margin-right: 8px;">
                                    <span>üå≠ Sausages</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="ü•ö Eggs" style="margin-right: 8px;">
                                    <span>ü•ö Eggs</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="üêë Lamb" style="margin-right: 8px;">
                                    <span>üêë Lamb</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="ü¶å Venison" style="margin-right: 8px;">
                                    <span>ü¶å Venison</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="ü¶Ü Duck" style="margin-right: 8px;">
                                    <span>ü¶Ü Duck</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="meat-check" value="ü•© Lean Ground Beef" style="margin-right: 8px;">
                                    <span>ü•© Lean Ground Beef</span>
                                </label>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">How often do you want to eat meat?</label>
                            <select id="quiz-meat-frequency" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                                <option value="every-meal">Every meal</option>
                                <option value="twice-daily">Twice per day</option>
                                <option value="once-daily">Once per day</option>
                                <option value="few-times-week">Few times per week</option>
                                <option value="rarely">Rarely</option>
                                <option value="never">Never (plant-based only)</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button onclick="prevStep()" style="background: #e74c3c; color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 1; font-weight: bold; cursor: pointer;">
                                ‚Üê Back
                            </button>
                            <button onclick="nextStep()" style="background: var(--gradient-1); color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 2; font-weight: bold; cursor: pointer;">
                                Continue ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            } else if (step === 5) {
                html = `
                    <div style="background: var(--gradient-1); color: white; padding: 30px; border-radius: 25px; margin-bottom: 25px; text-align: center;">
                        <h2 style="font-size: 28px; margin-bottom: 10px;">ü•¨ Vegetable Preferences</h2>
                        <p style="opacity: 0.9;">Step 5 of 9 - Choose your vegetables</p>
                    </div>
                    
                    <div style="background: var(--card-bg); border-radius: 20px; padding: 25px; margin-bottom: 20px;">
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <label style="color: var(--dark); font-weight: bold;">Select vegetables you enjoy</label>
                                <div style="display: flex; gap: 8px;">
                                    <button type="button" onclick="selectAllVeggies()" style="background: #28a745; color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">
                                        Check All
                                    </button>
                                    <button type="button" onclick="selectNoVeggies()" style="background: #dc3545; color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;">
                                        Check None
                                    </button>
                                </div>
                            </div>
                            <p style="font-style: italic; color: #666; margin-bottom: 12px; font-size: 14px;">
                                <em>Recommended: Choose at least 5-8 vegetables for variety</em>
                            </p>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; max-height: 320px; overflow-y: auto; border: 1px solid #ddd; padding: 15px; border-radius: 10px;">
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="ü•¨ Spinach" style="margin-right: 8px;" checked>
                                    <span>ü•¨ Spinach</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="ü•¶ Broccoli" style="margin-right: 8px;" checked>
                                    <span>ü•¶ Broccoli</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="ü•ï Carrots" style="margin-right: 8px;" checked>
                                    <span>ü•ï Carrots</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="üçÖ Tomatoes" style="margin-right: 8px;" checked>
                                    <span>üçÖ Tomatoes</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="üå∂Ô∏è Bell Peppers" style="margin-right: 8px;" checked>
                                    <span>üå∂Ô∏è Bell Peppers</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="ü•í Cucumbers" style="margin-right: 8px;" checked>
                                    <span>ü•í Cucumbers</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="üßÖ Onions" style="margin-right: 8px;" checked>
                                    <span>üßÖ Onions</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="ü•ë Avocados" style="margin-right: 8px;" checked>
                                    <span>ü•ë Avocados</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="ü•¨ Kale" style="margin-right: 8px;" checked>
                                    <span>ü•¨ Kale</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="üçÑ Mushrooms" style="margin-right: 8px;" checked>
                                    <span>üçÑ Mushrooms</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="üåΩ Corn" style="margin-right: 8px;" checked>
                                    <span>üåΩ Corn</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="ü•î Potatoes" style="margin-right: 8px;" checked>
                                    <span>ü•î Potatoes</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="üç† Sweet Potatoes" style="margin-right: 8px;" checked>
                                    <span>üç† Sweet Potatoes</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="üßÑ Garlic" style="margin-right: 8px;" checked>
                                    <span>üßÑ Garlic</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="ü•¨ Lettuce" style="margin-right: 8px;" checked>
                                    <span>ü•¨ Lettuce</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="üå∂Ô∏è Jalape√±os" style="margin-right: 8px;" checked>
                                    <span>üå∂Ô∏è Jalape√±os</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="ü•í Zucchini" style="margin-right: 8px;" checked>
                                    <span>ü•í Zucchini</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="üçÜ Eggplant" style="margin-right: 8px;" checked>
                                    <span>üçÜ Eggplant</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="veggie-check" value="ü•ï Baby Carrots" style="margin-right: 8px;" checked>
                                    <span>ü•ï Baby Carrots</span>
                                </label>
                            </div>
                            <p style="font-style: italic; color: #888; margin-top: 8px; font-size: 12px;">
                                <em>All vegetables are pre-selected. Uncheck any you don't want in your meal plans.</em>
                            </p>
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button onclick="prevStep()" style="background: #e74c3c; color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 1; font-weight: bold; cursor: pointer;">
                                ‚Üê Back
                            </button>
                            <button onclick="nextStep()" style="background: var(--gradient-1); color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 2; font-weight: bold; cursor: pointer;">
                                Continue ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            } else if (step === 6) {
                html = `
                    <div style="background: var(--gradient-1); color: white; padding: 30px; border-radius: 25px; margin-bottom: 25px; text-align: center;">
                        <h2 style="font-size: 28px; margin-bottom: 10px;">üèÉ‚Äç‚ôÇÔ∏è Exercise & Activity</h2>
                        <p style="opacity: 0.9;">Step 6 of 9 - Let's plan your workouts</p>
                    </div>
                    
                    <div style="background: var(--card-bg); border-radius: 20px; padding: 25px; margin-bottom: 20px;">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 12px; font-weight: bold;">What types of exercise do you plan to do? (check all that apply)</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="exercise-check" value="Weight Training" style="margin-right: 8px;">
                                    <span>üèãÔ∏è Weight Training</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="exercise-check" value="Running" style="margin-right: 8px;">
                                    <span>üèÉ Running</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="exercise-check" value="Cardio Machines" style="margin-right: 8px;">
                                    <span>üö¥ Cardio Machines</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="exercise-check" value="Swimming" style="margin-right: 8px;">
                                    <span>üèä Swimming</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="exercise-check" value="Yoga/Pilates" style="margin-right: 8px;">
                                    <span>üßò Yoga/Pilates</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="exercise-check" value="Sports" style="margin-right: 8px;">
                                    <span>‚öΩ Sports</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="exercise-check" value="Walking/Hiking" style="margin-right: 8px;">
                                    <span>ü•æ Walking/Hiking</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="exercise-check" value="HIIT" style="margin-right: 8px;">
                                    <span>üí• HIIT</span>
                                </label>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">How many days per week do you plan to exercise?</label>
                            <select id="quiz-exercise-days" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                                <option value="">Select...</option>
                                <option value="1-2">1-2 days per week</option>
                                <option value="3-4">3-4 days per week</option>
                                <option value="5-6">5-6 days per week</option>
                                <option value="7">Every day</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Workout intensity level</label>
                            <select id="quiz-intensity" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                                <option value="light">Light (casual, low intensity)</option>
                                <option value="moderate">Moderate (some challenge, can hold conversation)</option>
                                <option value="vigorous">Vigorous (challenging, breathing hard)</option>
                                <option value="high">High (intense, maximum effort)</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button onclick="prevStep()" style="background: #e74c3c; color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 1; font-weight: bold; cursor: pointer;">
                                ‚Üê Back
                            </button>
                            <button onclick="nextStep()" style="background: var(--gradient-1); color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 2; font-weight: bold; cursor: pointer;">
                                Continue ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            } else if (step === 7) {
                html = `
                    <div style="background: var(--gradient-1); color: white; padding: 30px; border-radius: 25px; margin-bottom: 25px; text-align: center;">
                        <h2 style="font-size: 28px; margin-bottom: 10px;">üçΩÔ∏è Meal Preferences</h2>
                        <p style="opacity: 0.9;">Step 7 of 9 - How do you like to eat?</p>
                    </div>
                    
                    <div style="background: var(--card-bg); border-radius: 20px; padding: 25px; margin-bottom: 20px;">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">How many meals per day do you prefer?</label>
                            <select id="quiz-meals-per-day" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                                <option value="3">3 meals (breakfast, lunch, dinner)</option>
                                <option value="4">4 meals (3 meals + 1 snack)</option>
                                <option value="5">5 meals (3 meals + 2 snacks)</option>
                                <option value="6">6 small meals throughout the day</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Cooking experience level</label>
                            <select id="quiz-cooking-level" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                                <option value="beginner">Beginner (prefer simple recipes)</option>
                                <option value="intermediate">Intermediate (comfortable with most recipes)</option>
                                <option value="advanced">Advanced (enjoy complex cooking)</option>
                                <option value="minimal">Minimal (prefer meal prep/quick meals)</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">How much time do you want to spend cooking daily?</label>
                            <select id="quiz-cooking-time" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                                <option value="15-min">15 minutes or less</option>
                                <option value="30-min">30 minutes</option>
                                <option value="45-min">45 minutes</option>
                                <option value="60-min">1 hour</option>
                                <option value="more">More than 1 hour</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 12px; font-weight: bold;">Meal prep preferences (check all that apply)</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="meal-prep-check" value="Batch cooking" style="margin-right: 8px;">
                                    <span>üì¶ Batch cooking</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="meal-prep-check" value="Make-ahead meals" style="margin-right: 8px;">
                                    <span>‚è∞ Make-ahead meals</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="meal-prep-check" value="Fresh daily cooking" style="margin-right: 8px;">
                                    <span>üî• Fresh daily cooking</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 12px; border-radius: 10px; cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" class="meal-prep-check" value="One-pot meals" style="margin-right: 8px;">
                                    <span>üç≤ One-pot meals</span>
                                </label>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button onclick="prevStep()" style="background: #e74c3c; color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 1; font-weight: bold; cursor: pointer;">
                                ‚Üê Back
                            </button>
                            <button onclick="nextStep()" style="background: var(--gradient-1); color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 2; font-weight: bold; cursor: pointer;">
                                Continue ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            } else if (step === 8) {
                html = `
                    <div style="background: var(--gradient-1); color: white; padding: 30px; border-radius: 25px; margin-bottom: 25px; text-align: center;">
                        <h2 style="font-size: 28px; margin-bottom: 10px;">üéØ Final Details</h2>
                        <p style="opacity: 0.9;">Step 8 of 9 - Almost done!</p>
                    </div>
                    
                    <div style="background: var(--card-bg); border-radius: 20px; padding: 25px; margin-bottom: 20px;">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Budget for groceries per week</label>
                            <select id="quiz-budget" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px;">
                                <option value="low">$50-75 per week (budget-friendly)</option>
                                <option value="moderate">$75-125 per week (moderate)</option>
                                <option value="high">$125-200 per week (premium)</option>
                                <option value="unlimited">$200+ per week (no budget constraints)</option>
                            </select>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 12px; font-weight: bold;">Food preferences & cuisines you enjoy (check all that apply)</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; max-height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 15px; border-radius: 10px;">
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="cuisine-check" value="American" style="margin-right: 8px;">
                                    <span>üá∫üá∏ American</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="cuisine-check" value="Italian" style="margin-right: 8px;">
                                    <span>üáÆüáπ Italian</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="cuisine-check" value="Mexican" style="margin-right: 8px;">
                                    <span>üá≤üáΩ Mexican</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="cuisine-check" value="Asian" style="margin-right: 8px;">
                                    <span>ü•¢ Asian</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="cuisine-check" value="Mediterranean" style="margin-right: 8px;">
                                    <span>ü´í Mediterranean</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="cuisine-check" value="Indian" style="margin-right: 8px;">
                                    <span>üáÆüá≥ Indian</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="cuisine-check" value="Thai" style="margin-right: 8px;">
                                    <span>üáπüá≠ Thai</span>
                                </label>
                                <label style="background: var(--lighter-bg); padding: 8px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; font-size: 13px;">
                                    <input type="checkbox" class="cuisine-check" value="Greek" style="margin-right: 8px;">
                                    <span>üá¨üá∑ Greek</span>
                                </label>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; color: var(--dark); margin-bottom: 8px; font-weight: bold;">Any additional notes or special requests?</label>
                            <textarea id="quiz-notes" placeholder="Anything else we should know about your diet preferences, schedule, or goals..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; resize: vertical; min-height: 80px;"></textarea>
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button onclick="prevStep()" style="background: #e74c3c; color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 1; font-weight: bold; cursor: pointer;">
                                ‚Üê Back
                            </button>
                            <button onclick="nextStep()" style="background: var(--gradient-1); color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 2; font-weight: bold; cursor: pointer;">
                                Continue ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            } else if (step === 9) {
                html = `
                    <div style="background: var(--gradient-1); color: white; padding: 30px; border-radius: 25px; margin-bottom: 25px; text-align: center;">
                        <h2 style="font-size: 28px; margin-bottom: 10px;">üéØ Quiz Complete!</h2>
                        <p style="opacity: 0.9;">Step 9 of 9 - Ready to generate your plan</p>
                    </div>
                    
                    <div style="background: var(--card-bg); border-radius: 20px; padding: 25px; margin-bottom: 20px; text-align: center;">
                        <h3 style="color: var(--dark); margin-bottom: 20px;">üéâ Your Enhanced Diet Quiz is Complete!</h3>
                        <p style="color: #666; margin-bottom: 25px;">We've collected all your preferences and will generate a personalized 2-week meal plan with shopping lists.</p>
                        
                        <button onclick="generatePlan()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 20px 40px; border-radius: 25px; font-weight: bold; cursor: pointer; font-size: 18px; margin-bottom: 15px;">
                            üöÄ Generate My AI Meal Plan
                        </button>
                        
                        <div style="margin-top: 20px;">
                            <button onclick="goBack()" style="background: #6c757d; color: white; border: none; padding: 12px 25px; border-radius: 20px; cursor: pointer;">
                                ‚Üê Back to Main App
                            </button>
                        </div>
                    </div>
                `;
            } else {
                html = `
                    <div style="background: var(--gradient-1); color: white; padding: 30px; border-radius: 25px; margin-bottom: 25px; text-align: center;">
                        <h2 style="font-size: 28px; margin-bottom: 10px;">üöß Step ${step}</h2>
                        <p style="opacity: 0.9;">Step ${step} of 9 - Coming soon!</p>
                    </div>
                    
                    <div style="background: var(--card-bg); border-radius: 20px; padding: 25px; margin-bottom: 20px; text-align: center;">
                        <p style="color: #666; margin-bottom: 25px;">This step is still being built. You can see steps 1-5 and 9 are working!</p>
                        
                        <div style="display: flex; gap: 10px;">
                            <button onclick="prevStep()" style="background: #e74c3c; color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 1; font-weight: bold; cursor: pointer;">
                                ‚Üê Back
                            </button>
                            <button onclick="nextStep()" style="background: var(--gradient-1); color: white; border: none; padding: 15px 30px; border-radius: 25px; flex: 2; font-weight: bold; cursor: pointer;">
                                Skip ‚Üí
                            </button>
                        </div>
                    </div>
                `;
            }

            content.innerHTML = html;
        }

        function nextStep() {
            // Save current step data
            if (currentStep === 1) {
                quizData.goal = document.getElementById('diet-goal').value;
                quizData.calories = document.getElementById('calorie-target').value;
                
                if (!quizData.goal) {
                    alert('Please select your goal');
                    return;
                }
            } else if (currentStep === 2) {
                quizData.age = document.getElementById('quiz-age').value;
                quizData.gender = document.getElementById('quiz-gender').value;
                quizData.weight = document.getElementById('quiz-weight').value;
                // ... save other step 2 data
            } else if (currentStep === 3) {
                quizData.allergies = Array.from(document.querySelectorAll('.allergy-check:checked')).map(cb => cb.value);
                quizData.dietaryLifestyle = document.getElementById('quiz-dietary-lifestyle').value;
            } else if (currentStep === 4) {
                quizData.meats = Array.from(document.querySelectorAll('.meat-check:checked')).map(cb => cb.value);
                quizData.meatFrequency = document.getElementById('quiz-meat-frequency').value;
            } else if (currentStep === 5) {
                quizData.vegetables = Array.from(document.querySelectorAll('.veggie-check:checked')).map(cb => cb.value);
            } else if (currentStep === 6) {
                quizData.exerciseTypes = Array.from(document.querySelectorAll('.exercise-check:checked')).map(cb => cb.value);
                quizData.exerciseDays = document.getElementById('quiz-exercise-days').value;
                quizData.exerciseIntensity = document.getElementById('quiz-intensity').value;
            } else if (currentStep === 7) {
                quizData.mealsPerDay = document.getElementById('quiz-meals-per-day').value;
                quizData.cookingLevel = document.getElementById('quiz-cooking-level').value;
                quizData.cookingTime = document.getElementById('quiz-cooking-time').value;
                quizData.mealPrepPrefs = Array.from(document.querySelectorAll('.meal-prep-check:checked')).map(cb => cb.value);
            } else if (currentStep === 8) {
                quizData.budget = document.getElementById('quiz-budget').value;
                quizData.cuisines = Array.from(document.querySelectorAll('.cuisine-check:checked')).map(cb => cb.value);
                quizData.notes = document.getElementById('quiz-notes').value;
                quizData.otherAllergies = document.getElementById('other-allergies').value;
                quizData.measurementSystem = measurementSystem;
                if (measurementSystem === 'metric') {
                    quizData.heightCm = document.getElementById('quiz-height-cm').value;
                } else {
                    quizData.feet = document.getElementById('quiz-feet').value;
                    quizData.inches = document.getElementById('quiz-inches').value;
                }
            }
            
            if (currentStep < totalSteps) {
                currentStep++;
                showStep(currentStep);
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function generatePlan() {
            alert('üéâ Enhanced Quiz Complete! Your data: ' + JSON.stringify(quizData, null, 2));
        }

        // Initialize
        updateTime();
        setInterval(updateTime, 1000);
        showStep(1);
    </script>
</body>
</html>