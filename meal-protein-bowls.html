<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protein Bowls - FuelFire</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .meal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .meal-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .meal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .meal-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #00b4db, #0083b0);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .meal-image.has-photo {
            background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3));
        }
        
        .meal-image.has-photo .category-icon {
            opacity: 0.8;
        }
        
        .difficulty-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .meal-content {
            padding: 20px;
        }
        
        .meal-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 8px;
        }
        
        .meal-prep-champion {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            border: 3px solid #FFD700;
            position: relative;
            overflow: hidden;
        }
        
        .meal-prep-champion::before {
            content: "üëë WEEKLY MEAL PREP CHAMPION üëë";
            position: absolute;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
            background: #FFD700;
            color: #000;
            padding: 4px 15px;
            border-radius: 15px;
            font-size: 11px;
            font-weight: bold;
            z-index: 10;
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        
        .meal-prep-champion .meal-image {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border-bottom: 3px solid #FFD700;
        }
        
        .meal-prep-champion .meal-title {
            color: #000;
            text-shadow: 1px 1px 2px rgba(255,215,0,0.5);
        }
        
        .meal-prep-champion .meal-content {
            background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,165,0,0.05));
        }
        
        .meal-description {
            color: #666;
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 12px;
        }
        
        .meal-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            font-size: 12px;
        }
        
        .meal-time {
            color: #888;
        }
        
        .rating-stars {
            color: #FF6B35;
        }
        
        .meal-nutrition {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-top: 12px;
        }
        
        .nutrition-item {
            text-align: center;
            padding: 8px 4px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .nutrition-value {
            font-weight: bold;
            color: var(--primary);
            font-size: 14px;
        }
        
        .nutrition-label {
            font-size: 10px;
            color: #666;
            margin-top: 2px;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            background: var(--primary);
            color: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
            position: relative;
        }

        .close-modal {
            position: absolute;
            right: 15px;
            top: 15px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 20px;
        }

        .ingredient-item, .instruction-item {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .ingredient-checkbox {
            margin-right: 10px;
        }

        .log-recipe-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <div class="screen">
            <div class="status-bar">
                <span id="time">9:41</span>
                <span>100%</span>
            </div>
            
            <div class="header">
                <div class="hamburger" onclick="goBack()">‚Üê</div>
                <div class="header-title">Protein Bowls</div>
            </div>
            
            <div class="content">
                <div style="padding: 20px;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="font-size: 48px;">ü•ó</div>
                        <h2 style="color: var(--primary); margin-bottom: 10px;">Power Protein Bowls</h2>
                        <p style="color: #666; font-size: 14px;">Nutrient-packed bowls that adapt to your fitness goals</p>
                    </div>
                    
                    <div class="meal-grid" id="meals-container">
                        <!-- Dynamic protein bowls will be loaded here based on BULK MODE selection -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recipe Modal -->
    <div id="recipe-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-modal" onclick="closeModal()">&times;</button>
                <h2 id="modal-title" style="margin: 0;">Recipe Title</h2>
                <p id="modal-description" style="margin: 10px 0 0 0; opacity: 0.9;"></p>
            </div>
            <div class="modal-body">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 20px;">
                    <div><strong>Time:</strong> <span id="modal-time"></span></div>
                    <div><strong>Difficulty:</strong> <span id="modal-difficulty"></span></div>
                    <div><strong>Calories:</strong> <span id="modal-calories"></span></div>
                    <div><strong>Protein:</strong> <span id="modal-protein"></span>g</div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px;">
                    <div class="nutrition-item">
                        <div class="nutrition-value" id="modal-calories-big"></div>
                        <div class="nutrition-label">Calories</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="nutrition-value" id="modal-protein-big"></div>
                        <div class="nutrition-label">Protein</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="nutrition-value" id="modal-carbs-big"></div>
                        <div class="nutrition-label">Carbs</div>
                    </div>
                    <div class="nutrition-item">
                        <div class="nutrition-value" id="modal-fat-big"></div>
                        <div class="nutrition-label">Fat</div>
                    </div>
                </div>
                
                <h3>Ingredients:</h3>
                <div id="modal-ingredients" style="margin-bottom: 20px;"></div>
                
                <h3>Instructions:</h3>
                <div id="modal-instructions"></div>
                
                <button class="log-recipe-btn" onclick="logRecipe()">üì± Log to Calorie Tracker</button>
            </div>
        </div>
    </div>

    <!-- Overlay for sidebar -->
    <div class="overlay" onclick="toggleSidebar()"></div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-brand">üî• Well Fit</div>
        </div>
        <div class="sidebar-menu">
            <div class="menu-item" onclick="goToPage('index.html')">üè† Home</div>
            <div class="menu-item" onclick="window.location.href='index.html#create-workout'">üí™ Create Workout</div>
            <div class="menu-item" onclick="goToPage('index.html')">üìö Saved Workouts</div>
            <div class="menu-item" onclick="goToPage('index.html')">üìä Track Workouts</div>
            <div class="menu-item" onclick="goToPage('workout-techniques.html')">üèãÔ∏è Workout Techniques</div>
            <div class="menu-item" onclick="goToPage('calorie-tracker.html')">üî• Calorie Tracker</div>
            <div class="menu-item" onclick="goToPage('enhanced-diet-quiz.html')">üéØ Diet Creation</div>
            <div class="menu-item" onclick="goToPage('meal-plans.html')">üçΩÔ∏è Meal Plans</div>
            <div class="menu-item" onclick="goToPage('meal-ideas.html')">üí° Meal Ideas</div>
            <div class="menu-item active" onclick="goToPage('meal-protein-bowls.html')">ü•ó Protein Bowls</div>
            <div class="menu-item" onclick="goToPage('supplements.html')">üíä Supplements</div>
            <div class="menu-item" onclick="goToPage('index.html')">üìà Progress & Analytics</div>
        </div>
    </div>

    <script>
        // BULK MODE SYSTEM - Dynamic protein bowls based on fitness goals
        const bulkModeRecipes = {
            'male-bulk': [
                {
                    name: "‚≠ê WEEKLY POWER PROTEIN BOWL PREP ‚≠ê",
                    description: "üìÖ Prep 7 massive protein bowls in 60 mins | Ultimate gains!",
                    time: "60 mins prep (7 meals)",
                    difficulty: 3,
                    rating: 5,
                    calories: 1485,
                    protein: 68,
                    carbs: 142,
                    fat: 45,
                    sugar: 22,
                    icon: "üëë",
                    mealPrepChampion: true,
                    ingredients: [
                        "üõí WEEKLY PROTEIN POWER SHOPPING:",
                        "5 lbs mixed proteins (2.5lb chicken, 1.5lb ground turkey, 1lb salmon)",
                        "7 cups quinoa + brown rice blend (uncooked)",
                        "14 cups mixed greens (kale, spinach, arugula)",
                        "7 sweet potatoes + 7 regular potatoes",
                        "3.5 avocados + 1.75 cups mixed nuts",
                        "14 cups mixed vegetables (broccoli, peppers, carrots)",
                        "7 tbsp olive oil + balsamic vinegar",
                        "Protein powders, hemp seeds, chia seeds",
                        "üì¶ Need: 7 XL meal prep containers"
                    ],
                    instructions: [
                        "üî• SUNDAY PROTEIN POWER PREP (60 minutes):",
                        "",
                        "‚è±Ô∏è BULK PREP PHASE (20 minutes):",
                        "‚Ä¢ Season and prep all proteins (chicken, turkey, salmon)",
                        "‚Ä¢ Roast potatoes and sweet potatoes at 425¬∞F",
                        "‚Ä¢ Cook quinoa-rice blend in large batch",
                        "‚Ä¢ Preheat multiple pans and oven stations",
                        "",
                        "‚è±Ô∏è COOKING PHASE (30 minutes):",
                        "‚Ä¢ Grill chicken breasts (6-7 mins per side)",
                        "‚Ä¢ Brown ground turkey with spices",
                        "‚Ä¢ Bake salmon fillets (12-15 minutes)",
                        "‚Ä¢ Steam vegetables in batches",
                        "",
                        "‚è±Ô∏è POWER ASSEMBLY (10 minutes):",
                        "‚Ä¢ Layer each container: 1.5 cups grain blend",
                        "‚Ä¢ Add mixed protein portions (chicken + turkey + salmon)",
                        "‚Ä¢ Pack vegetables, potatoes, and greens",
                        "‚Ä¢ Top with avocado, nuts, and seeds",
                        "",
                        "üí™ WEEKLY DOMINATION:",
                        "‚Ä¢ 7 bowls √ó 1,485 calories = 10,395 calories",
                        "‚Ä¢ 7 bowls √ó 68g protein = 476g protein",
                        "‚Ä¢ Complete amino profile for maximum muscle growth!"
                    ]
                },
                {
                    name: "Beast Mode Protein Mountain",
                    description: "Massive protein bowl for serious bulkers",
                    time: "25 mins",
                    difficulty: 2,
                    rating: 5,
                    calories: 1520,
                    protein: 72,
                    carbs: 138,
                    fat: 48,
                    sugar: 18,
                    icon: "üèîÔ∏è",
                    ingredients: [
                        "10 oz grilled chicken breast + 2 oz salmon",
                        "1.5 cups quinoa + 0.5 cups brown rice",
                        "1 cup roasted sweet potato cubes",
                        "1 cup steamed broccoli",
                        "1 whole avocado, sliced",
                        "1/4 cup mixed nuts (almonds, walnuts)",
                        "2 tbsp olive oil + balsamic",
                        "1 scoop protein powder mixed in"
                    ],
                    instructions: [
                        "Cook quinoa and brown rice together",
                        "Grill chicken and salmon simultaneously",
                        "Roast sweet potato cubes at 425¬∞F",
                        "Steam broccoli until bright green",
                        "Layer grains as base in large bowl",
                        "Add both proteins side by side",
                        "Arrange vegetables around bowl",
                        "Top with avocado, nuts, and protein powder",
                        "Drizzle with olive oil and balsamic",
                        "BEAST MODE ACTIVATED!"
                    ]
                }
            ],
            'male-cut': [
                {
                    name: "‚≠ê WEEKLY LEAN PROTEIN CUTTING BOWLS ‚≠ê",
                    description: "üìÖ Prep 7 ultra-lean protein bowls in 45 mins | Shred mode!",
                    time: "45 mins prep (7 meals)",
                    difficulty: 2,
                    rating: 5,
                    calories: 485,
                    protein: 52,
                    carbs: 28,
                    fat: 16,
                    sugar: 8,
                    icon: "üëë",
                    mealPrepChampion: true,
                    ingredients: [
                        "üõí WEEKLY CUTTING SHOPPING:",
                        "3.5 lbs lean proteins (chicken breast, white fish, lean turkey)",
                        "14 cups mixed greens (spinach, arugula, kale)",
                        "7 cups cauliflower rice",
                        "21 cups mixed vegetables (broccoli, asparagus, bell peppers)",
                        "7 tbsp olive oil + lemon juice",
                        "Fresh herbs (parsley, cilantro, basil)",
                        "Sea salt, pepper, garlic powder",
                        "üì¶ Need: 7 meal prep containers"
                    ],
                    instructions: [
                        "‚ö° SUNDAY CUTTING PREP (45 minutes):",
                        "Season all lean proteins with herbs and spices",
                        "Grill chicken breast and turkey (6-7 mins per side)",
                        "Bake white fish fillets (10-12 minutes)",
                        "Steam cauliflower rice in batches",
                        "Blanch all vegetables until crisp-tender",
                        "LEAN ASSEMBLY: Pack each container:",
                        "Base: 2 cups mixed greens + 1 cup cauliflower rice",
                        "Protein: Mix of chicken, turkey, and fish",
                        "Vegetables: 3 cups steamed vegetables",
                        "Dressing: Lemon juice + 1 tsp olive oil",
                        "Store dressing separately until eating",
                        "üî• Zero-carb cutting perfection!"
                    ]
                },
                {
                    name: "Lean Green Cutting Machine",
                    description: "Ultra-lean protein bowl for aggressive cuts",
                    time: "15 mins",
                    difficulty: 1,
                    rating: 4,
                    calories: 420,
                    protein: 48,
                    carbs: 18,
                    fat: 12,
                    sugar: 6,
                    icon: "üå±",
                    ingredients: [
                        "8 oz grilled chicken breast",
                        "3 cups mixed greens",
                        "1 cup steamed broccoli",
                        "1/2 cup cauliflower rice",
                        "1/2 cup cherry tomatoes",
                        "1 tbsp olive oil",
                        "Lemon juice, herbs, spices"
                    ],
                    instructions: [
                        "Grill seasoned chicken breast",
                        "Steam cauliflower rice until tender",
                        "Steam broccoli until bright green",
                        "Arrange mixed greens in large bowl",
                        "Add cauliflower rice as base",
                        "Top with sliced chicken breast",
                        "Add steamed broccoli and tomatoes",
                        "Drizzle with olive oil and lemon",
                        "Season with herbs and spices"
                    ]
                }
            ],
            'female-bulk': [
                {
                    name: "‚≠ê WEEKLY BALANCED PROTEIN POWER BOWLS ‚≠ê",
                    description: "üìÖ Prep 7 perfectly balanced bowls in 50 mins | Lean gains!",
                    time: "50 mins prep (7 meals)",
                    difficulty: 2,
                    rating: 5,
                    calories: 785,
                    protein: 45,
                    carbs: 68,
                    fat: 28,
                    sugar: 16,
                    icon: "üëë",
                    mealPrepChampion: true,
                    ingredients: [
                        "üõí WEEKLY BALANCED SHOPPING:",
                        "3.5 lbs lean proteins (chicken thigh, salmon, turkey)",
                        "7 cups mixed quinoa and wild rice",
                        "14 cups mixed greens and spinach",
                        "7 medium sweet potatoes",
                        "3.5 avocados + 1.75 cups mixed nuts",
                        "14 cups mixed vegetables (broccoli, carrots, peppers)",
                        "7 tbsp olive oil + tahini",
                        "Fresh herbs and seasonings",
                        "üì¶ Need: 7 meal prep containers"
                    ],
                    instructions: [
                        "üíé SUNDAY BALANCED PREP (50 minutes):",
                        "Cook quinoa-rice blend in large batch",
                        "Roast sweet potatoes at 400¬∞F (30 minutes)",
                        "Season and cook proteins (chicken, salmon, turkey)",
                        "Steam vegetables until crisp-tender",
                        "Prep fresh greens and herbs",
                        "BALANCED ASSEMBLY: Layer each container:",
                        "Base: 2 cups greens + 1 cup grain blend",
                        "Protein: Mixed portions for variety",
                        "Vegetables: Roasted sweet potato + steamed veggies",
                        "Healthy fats: 1/2 avocado + mixed nuts",
                        "Dressing: Tahini + olive oil blend",
                        "üí™ Perfect balance for female bulking goals!"
                    ]
                },
                {
                    name: "Goddess Power Bowl",
                    description: "Balanced nutrition bowl for female bulking",
                    time: "22 mins",
                    difficulty: 2,
                    rating: 5,
                    calories: 720,
                    protein: 42,
                    carbs: 58,
                    fat: 24,
                    sugar: 14,
                    icon: "üë∏",
                    ingredients: [
                        "6 oz salmon fillet",
                        "1 cup quinoa",
                        "1 cup roasted sweet potato",
                        "2 cups mixed greens",
                        "1/2 avocado, sliced",
                        "1/4 cup pumpkin seeds",
                        "2 tbsp tahini dressing",
                        "Fresh herbs and lemon"
                    ],
                    instructions: [
                        "Cook quinoa according to package",
                        "Roast sweet potato cubes at 400¬∞F",
                        "Pan-sear salmon skin-side down",
                        "Cook 4 minutes, flip and cook 3 more",
                        "Arrange mixed greens in bowl",
                        "Add quinoa and roasted sweet potato",
                        "Top with flaked salmon",
                        "Add avocado slices and pumpkin seeds",
                        "Drizzle with tahini dressing"
                    ]
                }
            ],
            'female-cut': [
                {
                    name: "‚≠ê WEEKLY LEAN GODDESS CUTTING BOWLS ‚≠ê",
                    description: "üìÖ Prep 7 clean cutting bowls in 40 mins | Sculpted results!",
                    time: "40 mins prep (7 meals)",
                    difficulty: 2,
                    rating: 5,
                    calories: 345,
                    protein: 38,
                    carbs: 22,
                    fat: 12,
                    sugar: 10,
                    icon: "üëë",
                    mealPrepChampion: true,
                    ingredients: [
                        "üõí WEEKLY CUTTING GODDESS SHOPPING:",
                        "2.5 lbs ultra-lean proteins (chicken breast, white fish, tofu)",
                        "21 cups mixed greens (spinach, arugula, baby kale)",
                        "7 cups spiralized zucchini noodles",
                        "14 cups low-carb vegetables (broccoli, asparagus, cucumber)",
                        "7 tbsp olive oil + apple cider vinegar",
                        "Fresh herbs (mint, basil, parsley)",
                        "Lemon juice, garlic, ginger",
                        "üì¶ Need: 7 meal prep containers"
                    ],
                    instructions: [
                        "‚ú® SUNDAY GODDESS PREP (40 minutes):",
                        "Season ultra-lean proteins with herbs",
                        "Grill chicken breast (6-7 mins per side)",
                        "Steam white fish until flaky",
                        "Prepare baked seasoned tofu cubes",
                        "Spiralize zucchini into noodles",
                        "Steam low-carb vegetables lightly",
                        "GODDESS ASSEMBLY: Layer each container:",
                        "Base: 3 cups mixed greens",
                        "Noodles: 1 cup zucchini spirals",
                        "Protein: Varied lean portions",
                        "Vegetables: 2 cups steamed vegetables",
                        "Dressing: Light vinaigrette",
                        "üî• Clean eating perfection for cuts!"
                    ]
                },
                {
                    name: "Sculpted Goddess Bowl",
                    description: "Ultra-clean bowl for female cutting phase",
                    time: "18 mins",
                    difficulty: 1,
                    rating: 4,
                    calories: 320,
                    protein: 36,
                    carbs: 16,
                    fat: 10,
                    sugar: 8,
                    icon: "‚ú®",
                    ingredients: [
                        "6 oz grilled white fish",
                        "3 cups mixed greens",
                        "1 cup spiralized zucchini",
                        "1/2 cup steamed asparagus",
                        "1/2 cup cherry tomatoes",
                        "1 tbsp olive oil",
                        "Lemon juice, fresh herbs"
                    ],
                    instructions: [
                        "Grill seasoned white fish fillet",
                        "Spiralize fresh zucchini",
                        "Steam asparagus until crisp-tender",
                        "Arrange mixed greens in bowl",
                        "Add zucchini noodles",
                        "Top with flaked fish",
                        "Add asparagus and tomatoes",
                        "Drizzle with olive oil and lemon",
                        "Garnish with fresh herbs"
                    ]
                }
            ]
        };

        // Get current recipes based on mode
        function getCurrentRecipes() {
            const urlParams = new URLSearchParams(window.location.search);
            const mode = urlParams.get('mode') || localStorage.getItem('fuelfire_bulk_mode') || 'male-bulk';
            return bulkModeRecipes[mode] || bulkModeRecipes['male-bulk'];
        }

        const proteinBowlRecipes = getCurrentRecipes();
        
        // Helper functions
        function updateTime() {
            const now = new Date();
            const time = now.toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: true 
            });
            document.getElementById('time').textContent = time;
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.querySelector('.overlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('show');
        }

        function goToPage(page) {
            window.location.href = page;
        }

        function goBack() {
            window.history.back();
        }

        function generateDifficultyStars(difficulty) {
            return '‚≠ê'.repeat(difficulty) + '‚òÜ'.repeat(3 - difficulty);
        }

        function generateRatingStars(rating) {
            return '‚≠ê'.repeat(rating) + '‚òÜ'.repeat(5 - rating);
        }

        function displayMeals() {
            const container = document.getElementById('meals-container');
            let html = '';
            
            proteinBowlRecipes.forEach((meal, index) => {
                const isChampion = meal.mealPrepChampion;
                const championClass = isChampion ? 'meal-prep-champion' : '';
                
                html += `
                    <div class="meal-card ${championClass}" onclick="openRecipeModal(${index})">
                        <div class="meal-image">
                            <div style="font-size: 60px;">${meal.icon || 'ü•ó'}</div>
                            <div class="difficulty-badge">${generateDifficultyStars(meal.difficulty)}</div>
                        </div>
                        <div class="meal-content">
                            <div class="meal-title">${meal.name}</div>
                            <div class="meal-description">${meal.description}</div>
                            <div class="meal-stats">
                                <div class="meal-time">‚è±Ô∏è ${meal.time}</div>
                                <div class="rating-stars">${generateRatingStars(meal.rating)}</div>
                            </div>
                            <div class="meal-nutrition">
                                <div class="nutrition-item">
                                    <div class="nutrition-value">${meal.calories}</div>
                                    <div class="nutrition-label">Calories</div>
                                </div>
                                <div class="nutrition-item">
                                    <div class="nutrition-value">${meal.protein}g</div>
                                    <div class="nutrition-label">Protein</div>
                                </div>
                                <div class="nutrition-item">
                                    <div class="nutrition-value">${meal.carbs}g</div>
                                    <div class="nutrition-label">Carbs</div>
                                </div>
                                <div class="nutrition-item">
                                    <div class="nutrition-value">${meal.fat}g</div>
                                    <div class="nutrition-label">Fat</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function openRecipeModal(index) {
            const meal = proteinBowlRecipes[index];
            
            document.getElementById('modal-title').textContent = meal.name;
            document.getElementById('modal-description').textContent = meal.description;
            document.getElementById('modal-time').textContent = meal.time;
            document.getElementById('modal-difficulty').textContent = generateDifficultyStars(meal.difficulty);
            document.getElementById('modal-calories').textContent = meal.calories;
            document.getElementById('modal-protein').textContent = meal.protein;
            
            // Big nutrition display
            document.getElementById('modal-calories-big').textContent = meal.calories;
            document.getElementById('modal-protein-big').textContent = meal.protein + 'g';
            document.getElementById('modal-carbs-big').textContent = meal.carbs + 'g';
            document.getElementById('modal-fat-big').textContent = meal.fat + 'g';
            
            // Ingredients
            const ingredientsContainer = document.getElementById('modal-ingredients');
            ingredientsContainer.innerHTML = '';
            meal.ingredients.forEach(ingredient => {
                const item = document.createElement('div');
                item.className = 'ingredient-item';
                item.innerHTML = `
                    <input type="checkbox" class="ingredient-checkbox">
                    <span>${ingredient}</span>
                `;
                ingredientsContainer.appendChild(item);
            });
            
            // Instructions
            const instructionsContainer = document.getElementById('modal-instructions');
            instructionsContainer.innerHTML = '';
            meal.instructions.forEach((instruction, idx) => {
                const item = document.createElement('div');
                item.className = 'instruction-item';
                item.innerHTML = `<strong>Step ${idx + 1}:</strong> ${instruction}`;
                instructionsContainer.appendChild(item);
            });
            
            // Store current recipe for logging
            window.currentRecipeIndex = index;
            
            document.getElementById('recipe-modal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('recipe-modal').style.display = 'none';
        }

        function logRecipe() {
            if (typeof window.currentRecipeIndex !== 'undefined') {
                const meal = proteinBowlRecipes[window.currentRecipeIndex];
                
                // Get current date
                const today = new Date().toISOString().split('T')[0];
                
                // Get existing logged meals or create new structure
                let loggedMeals = JSON.parse(localStorage.getItem('loggedMeals') || '{}');
                
                if (!loggedMeals[today]) {
                    loggedMeals[today] = {
                        date: today,
                        totalCalories: 0,
                        totalProtein: 0,
                        totalCarbs: 0,
                        totalFat: 0,
                        meals: []
                    };
                }
                
                // Add this recipe
                loggedMeals[today].meals.push({
                    name: meal.name,
                    calories: meal.calories,
                    protein: meal.protein,
                    carbs: meal.carbs,
                    fat: meal.fat,
                    time: new Date().toISOString(),
                    source: 'Protein Bowls'
                });
                
                // Update totals
                loggedMeals[today].totalCalories += meal.calories;
                loggedMeals[today].totalProtein += meal.protein;
                loggedMeals[today].totalCarbs += meal.carbs;
                loggedMeals[today].totalFat += meal.fat;
                
                // Save to localStorage
                localStorage.setItem('loggedMeals', JSON.stringify(loggedMeals));
                
                alert(`‚úÖ ${meal.name} logged to your calorie tracker!`);
                closeModal();
            }
        }

        // Click outside modal to close
        window.onclick = function(event) {
            const modal = document.getElementById('recipe-modal');
            if (event.target == modal) {
                closeModal();
            }
        }

        // Initialize
        window.addEventListener('load', function() {
            updateTime();
            setInterval(updateTime, 1000);
            displayMeals();
        });
    </script>
</body>
</html>